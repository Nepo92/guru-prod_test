<html lang="ru" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Оценка работы">

    <title>Оценка работы</title>

    <th:block th:insert="base :: links" />
    <link th:href="@{/css/block.css}" rel="stylesheet">
    <link th:href="@{/css/side-content.css}" rel="stylesheet">
    <link th:href="@{/css/jquery.fancybox.min.css}" rel="stylesheet">
</head>

<body>
<div th:replace="base :: dialog"></div>
<div th:replace="base :: main-nav"></div>
<div th:replace="base :: transition-loader"></div>

<div class="main-content main-content_white-top-medium">
    <div class="content-top content-top_btn">
        <div class="content-top__header">Оценка работы</div>
    </div>

    <div class="content-top content-top_small">
        <div th:replace="base :: performance-assessment-tab"></div>
    </div>

    <div class="content-main">
        <div class="content-main__panel content-main__panel_large">
            <div class="button-filter button-filter_bordered" th:classappend="${filter.isCanClearWithManager() ? 'filtered' : ''}">
                <button tr-filter-btn class="content-top__filter"></button>
                <span class="button-filter__label">Фильтр</span>
            </div>
            <form search-client-form action="#" th:action="@{/performance-assessment/rating/}" th:object="${filter}" th:method="post" class="search-form menu-search__wrapper">
                <input search-client id="searchClient" th:field="*{searchRow}" class="menu-search__input menu-search__input_search" placeholder="Введите ссылку, ФИО или телефон клиента">
                <label search-client-btn for="searchClient" class="menu-input_close " th:classappend="${#strings.isEmpty(filter.searchRow)} ? 'is-open' : ''"></label>
                <label search-client-clear class="clear menu-input_close" th:classappend="${#strings.isEmpty(filter.searchRow)} ? '' : 'is-open'"></label>
            </form>
            <div class="counter counter_right" th:utext="${dealCounter.count} + ' сделки на сумму ' + ${#numbers.formatInteger(dealCounter.price,0,'WHITESPACE')} + ' / ' + ${#numbers.formatInteger(dealCounter.paid,0,'WHITESPACE') + ' ₽'}"></div>
        </div>
        <div class="content-main__wrapper">
            <div class="content-main__panel content-main__panel_align content-main__panel_p">
                <table class="custom-table">
                    <thead class="custom-table__header">
                        <tr class="custom-table__header-row">
                            <td class="custom-table__header-col custom-table__header-col_big">Дата</td>
                            <td class="custom-table__header-col custom-table__header-col_big">Действия</td>
                            <td class="custom-table__header-col custom-table__header-col_xsmall custom-table__header-col_big"></td>
                            <td class="custom-table__header-col custom-table__header-col_big">Клиент</td>
                            <td class="custom-table__header-col custom-table__header-col_big">Ссылка</td>
                            <td class="custom-table__header-col custom-table__header-col_big">Менеджер</td>
                            <td class="custom-table__header-col custom-table__header-col_big">Продукт</td>
                            <td class="custom-table__header-col custom-table__header-col_big">Тип</td>
                            <td class="custom-table__header-col custom-table__header-col_big">Цена / Получено</td>
                            <td class="custom-table__header-col custom-table__header-col_big">Старт</td>
                            <td class="custom-table__header-col custom-table__header-col_big">ID кампании</td>
                            <td class="custom-table__header-col custom-table__header-col_big">
                                <div class="column-mailing"></div>
                            </td>
                            <td class="custom-table__header-col custom-table__header-col_big">Статус сделки</td>
                            <td class="custom-table__header-col custom-table__header-col_big"></td>
                            <td class="custom-table__header-col custom-table__header-col_big">Оценки</td>
                            <td class="custom-table__header-col custom-table__header-col_big"></td>
                        </tr>
                    </thead>
                    <tbody class="custom-table__body custom-table__body_white">
                        <tr th:attr="data-deal=${deal.id}" class="custom-table__body-row" th:each="deal : ${deals.pageItems}">
                            <td class="custom-table__body-col" th:utext="${deal.editDate}"></td>
                            <td class="custom-table__body-col c-tooltip">
                                <div class="c-tooltip__wrapper" th:if="${not #lists.isEmpty(deal.lastChanges)}">
                                    <th:block th:each="change : ${deal.lastChanges}">
                                        <div class="c-tooltip__text" th:utext="${change}"></div>
                                    </th:block>
                                </div>
                                <div class="column-text">
                                    <th:block th:each="change : ${deal.lastChanges}">
                                        <th:block th:utext="${change}"></th:block>
                                    </th:block>
                                </div>
                            </td>
                            <td class="custom-table__body-col">
                                <div data-deal-social class="deal-social deal-social_big" th:classappend="'deal-social_' + ${deal.socialCode}"></div>
                            </td>

                            <td class="custom-table__body-col">
                                <div js-client-card class="column-link column-link_active">
                                    <input type="hidden" js-client-id th:attr="data-client=${deal.idClient}" th:value="${deal.idClient}">
                                    <span th:utext="${deal.clientName}"></span>
                                </div>
                                <div class="phone-column" th:attr="data-phone-client=${deal.idClient}">
                                    <th:block th:unless="${#strings.isEmpty(deal.clientPhone)}">
                                        <div js-copy-link th:attr="data-link=${deal.clientPhone}" class="client-phone" th:utext="${deal.clientPhone}"></div>
                                    </th:block>
                                </div>
                            </td>

                            <th:block th:if="${#strings.isEmpty(deal.clientLink)}">
                                <td class="custom-table__body-col" th:attr="data-link-client=${deal.idClient}">
                                    <div>—</div>
                                </td>
                            </th:block>
                            <th:block th:unless="${#strings.isEmpty(deal.clientLink)}">
                                <td class="custom-table__body-col custom-table__body-col_center" th:attr="data-link-client=${deal.idClient}">
                                    <div class="column-links">
                                        <div js-copy-link th:attr="data-link=${deal.clientLink}" class="column_mwidth column_mwidth-copy"></div>
                                        <a th:href="${deal.clientLink}" target="_blank" class="column_mwidth column_mwidth-open"></a>
                                    </div>
                                </td>
                            </th:block>
                            <td class="custom-table__body-col c-tooltip">
                                <div class="c-tooltip__wrapper">
                                    <div class="c-tooltip__text" th:utext="${deal.managerAccessName}"></div>
                                </div>
                                <div class="column-text" th:utext="${deal.managerName}"></div>
                            </td>
                            <td class="custom-table__body-col">
                                <form action="#" js-view-deal-form>
                                    <input name="id" type="hidden" th:value="${deal.id}">
                                    <div class="column-course" js-view-deal-btn
                                         th:attr="title=${(deal.status != 1) ? deal.course + (!#strings.isEmpty(deal.kind) ? ' (' + deal.kind + ')' : '') : 'Целевая заявка' }"
                                         th:utext="${(deal.status != 1) ? deal.course + (!#strings.isEmpty(deal.kind) ? ' (' + deal.kind + ')' : '') : 'Целевая заявка'}"></div>
                                </form>
                            </td>
                            <td data-deal-type class="custom-table__body-col" th:utext="${deal.type}"></td>
                            <td class="custom-table__body-col">
                                <div class="column-paid" th:classappend="${deal.price <= deal.paid} ? 'column-paid_green' : ''">
                                    <div data-deal-price class="column_price" th:utext="${deal.price}"></div>
                                    <div class="column_price-del">/</div>
                                    <div data-deal-paid class="column_paid" th:utext="${deal.paid} + ' ₽'"></div>
                                </div>
                            </td>
                            <th:block th:if="${deal.idSaleType == 2}">
                                <td data-deal-start-date class="custom-table__body-col" th:utext="${deal.startDate}"></td>
                            </th:block>
                            <th:block th:unless="${deal.idSaleType == 2}">
                                <td class="custom-table__body-col">—</td>
                            </th:block>
                            <td data-deal-tag class="custom-table__body-col">
                                <th:block th:if="${#strings.isEmpty(deal.tag)}">
                                    <div>—</div>
                                </th:block>
                                <th:block th:unless="${#strings.isEmpty(deal.tag)}">
                                    <div th:attr="title=${deal.tag}" class="column-msg">
                                        <th:block th:utext="${deal.tag}"></th:block>
                                    </div>
                                </th:block>
                            </td>
                            <td data-deal-mailing class="custom-table__body-col" th:utext="${deal.coupling}"></td>
                            <td class="custom-table__body-col c-tooltip">
                                <div class="c-tooltip__wrapper c-tooltip__wrapper_xxlarge" th:if="${not #lists.isEmpty(deal.statusChanges)}">
                                        <table class="c-tooltip-table">
                                            <thead class="c-tooltip-table__head">
                                            <tr class="c-tooltip-table__head-row">
                                                <td class="c-tooltip-table__head-col c-tooltip__text c-tooltip__text_title">Изменен</td>
                                                <td class="c-tooltip-table__head-col c-tooltip__text c-tooltip__text_title">Статус</td>
                                            </tr>
                                            </thead>
                                            <tbody class="c-tooltip-table__body">
                                                <tr class="c-tooltip-table__body-row" th:each="change : ${deal.statusChanges}">
                                                    <td class="c-tooltip-table__body-col c-tooltip__text inherit" th:utext="${change.editDatetime}"></td>
                                                    <td class="c-tooltip-table__body-col c-tooltip__text inherit" th:utext="${change.title}"></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                </div>
                                <div class="column-status">
                                    <div class="deal-status__form" th:classappend="'deal-status__form_' + ${deal.statusCode}">
                                        <div class="deal-status__select" th:utext="${deal.statusName}"></div>
                                    </div>
                                </div>
                            </td>
                            <td class="custom-table__body-col">
                                <div data-deal-reminder class="column-reminder">
                                    <div class="reminder-wrapper" th:if="${deal.reminder}" >
                                        <div class="reminder-date" th:utext="${deal.reminderDate}"></div>
                                        <div class="reminder-msg" th:utext="${deal.reminderMessage}"></div>
                                    </div>
                                    <div class="reminder" th:classappend="${deal.reminder} ? (${deal.reminderExpiration} ? 'reminder_red' : (${deal.reminderToday} ? 'reminder_green' : 'reminder_gray')) : ''"></div>
                                    <div class="reminder-d" th:if="${deal.reminder}" th:utext="${deal.reminderDate}"></div>
                                </div>
                            </td>
                            <td class="custom-table__body-col">
                                <div class="pa-rate">
                                    <th:block th:if="${deal.rateCounter.ratedTemplateCounter == 0}">нет</th:block>
                                    <th:block th:unless="${deal.rateCounter.ratedTemplateCounter == 0}">
                                        <div class="pa-rate_rate" th:utext="${deal.rateCounter.ratedTemplateCounter}"></div>
                                        <div class="pa-rate_delim">/</div>
                                        <div class="pa-rate_rate" th:utext="${deal.rateCounter.allTemplateCounter}"></div>
                                    </th:block>
                                </div>
                            </td>
                            <td class="custom-table__body-col custom-table__body-col_r16">
                                <button type="button" open-rates class="button button_white">Оценить</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="content-main__panel content-main__panel_large">
            <div class="pagination" th:if="${deals.pagesAvailable > 1}" th:with="left=4,right=5">
                <div class="pagination__wrapper">
                    <a th:attrappend="href=${deals.pageNumber - 1 > 0} ? 'page?id=' + ${deals.pageNumber - 1} : ''"
                       th:classappend="${deals.pageNumber - 1} == 0 ? 'active' : ''"
                       class="pagination__elem pagination__elem_prev"></a>

                    <th:block th:if="${deals.pagesAvailable <= 10}"
                              th:with="start=1,end=${deals.pagesAvailable}">
                        <th:block th:each="i : ${#numbers.sequence(start,end)}">
                            <a th:attrappend="href='page?id=' + ${i}"
                               th:classappend="${deals.pageNumber == i} ? 'active' : ''"
                               th:utext="${i}" class="pagination__elem"></a>
                        </th:block>
                    </th:block>
                    <th:block th:unless="${deals.pagesAvailable <= 10}">
                        <th:block th:if="${deals.pageNumber > left && deals.pageNumber < (deals.pagesAvailable - right)}"
                                  th:with="start=${deals.pageNumber - left},end=${deals.pageNumber + right}">
                            <th:block th:each="i : ${#numbers.sequence(start,end)}">
                                <a th:attrappend="href='page?id=' + ${i}"
                                   th:classappend="${deals.pageNumber == i} ? 'active' : ''"
                                   th:utext="${i}" class="pagination__elem"></a>
                            </th:block>
                        </th:block>
                        <th:block th:if="${deals.pageNumber <= left}"  th:with="start=1,end=${deals.pageNumber + (right + 1 + left - deals.pageNumber)}">
                            <th:block th:each="i : ${#numbers.sequence(start,end)}">
                                <a th:attrappend="href='page?id=' + ${i}"
                                   th:classappend="${deals.pageNumber == i} ? 'active' : ''"
                                   th:utext="${i}" class="pagination__elem"></a>
                            </th:block>
                        </th:block>
                        <th:block th:unless="${(deals.pageNumber > left && deals.pageNumber < (deals.pagesAvailable - right)) || (deals.pageNumber <= left)}"
                                  th:with="start=${deals.pageNumber - (left + right - (deals.pagesAvailable - deals.pageNumber))},end=${deals.pagesAvailable}">
                            <th:block th:each="i : ${#numbers.sequence(start,end)}">
                                <a th:attrappend="href='page?id=' + ${i}"
                                   th:classappend="${deals.pageNumber == i} ? 'active' : ''"
                                   th:utext="${i}" class="pagination__elem"></a>
                            </th:block>
                        </th:block>
                    </th:block>

                    <a th:attrappend="href=${deals.pageNumber + 1 <= deals.pagesAvailable } ? 'page?id=' + ${deals.pageNumber + 1} : ''"
                       th:classappend="${deals.pageNumber + 1 > deals.pagesAvailable} ? 'active' : ''"
                       class="pagination__elem pagination__elem_next"></a>
                </div>
            </div>
        </div>
    </div>
</div>

<div js-menu-rates class="menu">
    <div class="menu__wrapper">
        <div js-menu-rates-close-btn class="menu-header__close-btn menu-header__close-btn_absolute"></div>
        <div class="menu__content">
            <div class="menu__content-side menu__content-side_full menu__content-side_gray">
                <div class="menu__header-wrapper">
                    <div class="menu-header">
                        <div class="menu-header__title">
                            Оценить сотрудника
                        </div>
                    </div>
                </div>

                <div class="menu__list menu__list_p0 custom-scroll">
                    <div class="menu-block">
                        <div class="menu-block__wrapper menu-block__wrapper_xlarge">
                            <div class="menu-block__side">
                                <div class="menu-block__content">
                                    <div class="menu-input__wrapper menu-input__wrapper_row">
                                        <div class="employee">
                                            <div class="employee__avatar">
                                                <div class="avatar">
                                                    <div class="avatar__wrapper avatar__wrapper_large">
                                                        <span rate-avatar class="avatar-image"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="employee__desc">
                                                <div rate-employee-name class="employee-name employee-name_medium"></div>
                                                <div class="employee__desc-wrapper">
                                                    <div rate-employee-position class="employee-desc"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="menu-input__vdelim"><span></span></div>
                                        <div class="desc-block__wrapper">
                                            <div rate-date class="desc-block__desc"></div>
                                            <div rate-deal class="desc-block__desc"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="menu-block__wrapper menu-block__wrapper_xlarge">
                            <div class="menu-block__side">
                                <div class="menu-block__content">
                                    <div class="menu-input__wrapper menu-input__wrapper_row">
                                        <table class="custom-table">
                                            <thead class="custom-table__header">
                                            <tr class="custom-table__header-row">
                                                <td class="custom-table__header-col "></td>
                                                <td class="custom-table__header-col ">Список</td>
                                                <td class="custom-table__header-col ">Кол-во пунктов</td>
                                                <td class="custom-table__header-col ">Оценка</td>
                                                <td class="custom-table__header-col "></td>
                                            </tr>
                                            </thead>
                                            <tbody templates class="custom-table__body custom-table__body_white">

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div js-menu-rate class="menu">
    <div class="menu__wrapper">
        <div js-menu-rate-close-btn class="menu-header__close-btn menu-header__close-btn_absolute"></div>
        <div class="menu__content">
            <form js-rate-form action="#" class="menu__content-side menu__content-side_full menu__content-side_gray">
                <div class="menu__header-wrapper">
                    <div class="menu-header">
                        <div class="menu-header__title">
                            Оценить сотрудника
                        </div>
                    </div>
                </div>

                <div class="menu__list menu__list_p0 custom-scroll">
                    <div class="menu-block">
                        <div class="menu-block__wrapper menu-block__wrapper_xlarge">
                            <div class="menu-block__side">
                                <div class="menu-block__content">
                                    <div class="menu-input__wrapper menu-input__wrapper_row">
                                        <div class="employee">
                                            <div class="employee__avatar">
                                                <div class="avatar">
                                                    <div class="avatar__wrapper avatar__wrapper_large">
                                                        <span rate-avatar class="avatar-image"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="employee__desc">
                                                <div rate-employee-name class="employee-name employee-name_medium"></div>
                                                <div class="employee__desc-wrapper">
                                                    <div rate-employee-position class="employee-desc"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="menu-input__vdelim"><span></span></div>
                                        <div class="desc-block__wrapper">
                                            <div rate-date class="desc-block__desc"></div>
                                            <div rate-deal class="desc-block__desc"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="menu-block__wrapper menu-block__wrapper_xlarge">
                            <div class="menu-block__side">
                                <div class="menu-block__content">
                                    <div class="menu-input__wrapper menu-input__wrapper_row">
                                        <table class="custom-table">
                                            <thead class="custom-table__header">
                                            <tr class="custom-table__header-row">
                                                <td class="custom-table__header-col ">Пункт оценки</td>
                                                <td class="custom-table__header-col ">Комментарий</td>
                                                <td class="custom-table__header-col ">Оценка</td>
                                                <td class="custom-table__header-col "></td>
                                            </tr>
                                            </thead>
                                            <tbody template-fields class="custom-table__body custom-table__body_white">

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="menu__footer menu__footer_start">
                    <input rate-id-deal type="hidden" name="idDeal" required>
                    <input rate-id-template type="hidden" name="idPerformanceAssessmentTemplate" required>
                    <button type="button" js-save-rate disabled class="button button_not-allowed button_white">Оценить</button>
                    <div class="element-delim"><span></span></div>
                    <div class="score total-score">—</div>
                </div>
            </form>
        </div>
    </div>
</div>

<div js-menu-rate-items class="menu">
    <div class="menu__wrapper">
        <div js-menu-rate-items-close-btn class="menu-header__close-btn menu-header__close-btn_absolute"></div>
        <div class="menu__content">
            <div class="menu__content-side menu__content-side_full menu__content-side_gray">
                <div class="menu__header-wrapper">
                    <div class="menu-header">
                        <div class="menu-header__title">
                            Оценить сотрудника
                        </div>
                    </div>
                </div>

                <div class="menu__list menu__list_p0 custom-scroll">
                    <div class="menu-block">
                        <div class="menu-block__wrapper menu-block__wrapper_xlarge">
                            <div class="menu-block__side">
                                <div class="menu-block__content">
                                    <div class="menu-input__wrapper menu-input__wrapper_row">
                                        <div class="employee">
                                            <div class="employee__avatar">
                                                <div class="avatar">
                                                    <div class="avatar__wrapper avatar__wrapper_large">
                                                        <span rate-avatar class="avatar-image"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="employee__desc">
                                                <div rate-employee-name class="employee-name employee-name_medium"></div>
                                                <div class="employee__desc-wrapper">
                                                    <div rate-employee-position class="employee-desc"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="menu-input__vdelim"><span></span></div>
                                        <div class="desc-block__wrapper">
                                            <div rate-date class="desc-block__desc"></div>
                                            <div rate-deal class="desc-block__desc"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="menu-block__wrapper menu-block__wrapper_xlarge">
                            <div class="menu-block__side">
                                <div class="menu-block__content">
                                    <div class="menu-input__wrapper menu-input__wrapper_row">
                                        <table class="custom-table custom-table_content">
                                            <thead class="custom-table__header">
                                            <tr class="custom-table__header-row">
                                                <td class="custom-table__header-col ">Пункт оценки</td>
                                                <td class="custom-table__header-col ">Оценка</td>
                                                <td class="custom-table__header-col "></td>
                                            </tr>
                                            </thead>
                                            <tbody rate-items class="custom-table__body custom-table__body_white">

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<div js-menu-add-comment class="menu">
    <div class="menu__wrapper">
        <div js-menu-add-comment-close-btn class="menu-header__close-btn menu-header__close-btn_absolute"></div>
        <div class="menu__content menu__content_end">
            <form js-add-comment-form action="#" class="menu__content-side menu__content-side_large" enctype="multipart/form-data">
                <div class="menu__header-wrapper">
                    <div class="menu-header">
                        <div class="menu-header__title">
                            Добавить комментарий
                        </div>
                    </div>
                </div>
                <div class="menu__list menu__list_p0 custom-scroll">
                    <input comment-index type="hidden" name="index" required>

                    <div class="menu-input menu-input_xsmall menu-input_t30">
                        <div class="menu-input__title">Комментарий</div>
                        <div class="menu-input__wrapper">
                            <textarea comment-desc name="exComment" placeholder="Введите комментарий" class="menu-input__input menu-input__input_small menu-input__input-textarea"></textarea>
                        </div>
                    </div>

                    <div class="menu-input__delim">
                        <span></span>
                    </div>

                    <div class="menu-input menu-input_xsmall">
                        <div class="menu-input__title">Дополнительные материалы</div>
                        <div class="input-element__input input-element__input_transparent input-element__img input-element__img_border">
                            <input comment-files type="file" id="files" accept=".png,.jpeg,.jpg,.pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx" class="input-upload-file" multiple>
                            <label for="files" class="input-upload-label input-upload-label_auto js-upload-banner">
                                <span class="menu-input__title">Загрузите файл (PNG, JPEG, PDF, DOC, PPT, XLS)</span>
                            </label>
                        </div>
                        <div class="input-element__documents">
                            <div class="input-element__documents-new"></div>
                        </div>
                    </div>
                </div>
                <div class="menu__footer">
                    <button type="button" js-add-comment class="button button_white">Добавить комментарий</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div tr-filter class="cfilter">
    <div class="cfilter__wrapper">
        <div tr-filter-close-btn class="menu-header__close-btn menu-header__close-btn_absolute"></div>
        <div class="filter-content">
            <div class="filter-head">
                <div class="filter-head__title">Фильтровать сделки</div>
            </div>
            <div class="filter-content__body custom-scroll">
                <form tr-filter-form action="#" th:action="@{/performance-assessment/rating/}" th:object="${filter}" th:method="post" class="filter-body">
                    <div class="filter-body__wrapper">
                        <div class="filter-column">
                            <div class="filter-column__title">Параметры</div>
                            <div class="filter-column__row">
                                <div class="menu-input menu-input_xxsmall">
                                    <div class="menu-input__title">Проекты</div>
                                    <div class="menu-input__wrapper menu-input__wrapper_select">
                                        <select class="menu-input__input menu-input__input_small menu-input__input_select menu-input__input_white" th:field="*{projectId}">
                                            <option th:value="0" selected>Все проекты</option>
                                            <option th:each="project : ${projects}"
                                                    th:value="${project.id}"
                                                    th:utext="${project.name}"></option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="filter-column__row">
                                <div class="menu-input menu-input_xxsmall">
                                    <div class="menu-input__title">Менеджеры</div>
                                    <div class="menu-input__wrapper menu-input__wrapper_select">
                                        <select tr-social class="menu-input__input menu-input__input_small menu-input__input_select menu-input__input_white" th:field="*{idManager}">
                                            <option th:value="0" selected>Все менеджеры</option>
                                            <option th:each="manager : ${managers}"
                                                    th:value="${manager.id}"
                                                    th:utext="${manager.name}"></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="menu-input menu-input_xxsmall">
                                    <div class="menu-input__title">Способ оплаты</div>
                                    <div class="menu-input__wrapper menu-input__wrapper_select">
                                        <select class="menu-input__input menu-input__input_small menu-input__input_select menu-input__input_white" th:field="*{paymentMethod}">
                                            <option th:value="all" selected>Все способы</option>
                                            <option th:each="paymentMethod : ${paymentMethods}"
                                                    th:value="${paymentMethod.title}"
                                                    th:utext="${paymentMethod.title}"></option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="filter-column__row">
                                <div class="menu-input menu-input_xxsmall">
                                    <div class="menu-input__title">Соц-сеть</div>
                                    <div class="menu-input__wrapper menu-input__wrapper_select">
                                        <select tr-social class="menu-input__input menu-input__input_small menu-input__input_select menu-input__input_white" th:field="*{idSocial}">
                                            <option th:value="0" selected>Все соц.сети</option>
                                            <option th:each="social : ${socials}"
                                                    th:value="${social.id}"
                                                    th:utext="${social.title}"></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="menu-input menu-input_xxsmall">
                                    <div class="menu-input__title">Тип продажи</div>
                                    <div class="menu-input__wrapper menu-input__wrapper_select">
                                        <select  class="menu-input__input menu-input__input_small menu-input__input_select menu-input__input_white" th:field="*{saleType}">
                                            <option th:value="all" selected>Все типы продаж</option>
                                            <option th:value="traffic">Трафик</option>
                                            <option th:value="additional">Допродажи</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="filter-column__row">
                                <div class="menu-input menu-input_xxsmall">
                                    <div class="menu-input__title">Продукты</div>
                                    <div class="menu-input__wrapper menu-input__wrapper_select">
                                        <select filter-courses class="menu-input__input menu-input__input_small menu-input__input_select menu-input__input_white" th:field="*{product}">
                                            <option th:value="all" selected>Все продукты</option>
                                            <option th:each="product : ${products}"
                                                    th:value="${product.name}"
                                                    th:utext="${product.name}"></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="menu-input menu-input_xxsmall">
                                    <div class="menu-input__title">Тип курса</div>
                                    <div class="menu-input__wrapper menu-input__wrapper_select">
                                        <select filter-course-kinds class="menu-input__input menu-input__input_small menu-input__input_select menu-input__input_white" th:field="*{kind}">
                                            <option th:value="all" selected>Все типы</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="filter-column__row">
                                <div class="menu-input menu-input_xxsmall">
                                    <div class="menu-input__title">Напоминание</div>
                                    <div class="menu-input__wrapper menu-input__wrapper_select">
                                        <select tr-social class="menu-input__input menu-input__input_small menu-input__input_select menu-input__input_white" th:field="*{reminder}">
                                            <option th:value="0" selected>Все</option>
                                            <option th:value="1" >Все задачи</option>
                                            <option th:value="2" >Задачи на сегодня</option>
                                            <option th:value="3" >Задачи на завтра</option>
                                            <option th:value="4" >Просроченные задачи</option>
                                            <option th:value="5" >Без задач</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="filter-column__row">
                                <div class="menu-input menu-input_xxsmall menu-input_w100">
                                    <div class="menu-input__title">Пробный период</div>
                                    <div class="menu-input__wrapper menu-input__wrapper_row">
                                        <div class="input-element__radio input-element__radio_list">
                                            <input type="radio" id="trialYes" class="radio" name="trial" value="true" th:field="*{trial}">
                                            <label for="trialYes" >
                                                <span>Да</span>
                                            </label>
                                        </div>
                                        <div class="input-element__radio input-element__radio_list">
                                            <input type="radio" id="trialNo" class="radio" name="trial" value="false" th:field="*{trial}">
                                            <label for="trialNo" >
                                                <span>Нет</span>
                                            </label>
                                        </div>
                                        <div class="input-element__radio input-element__radio_list">
                                            <input type="radio" id="trialAll" class="radio" name="trial" value="all" th:field="*{trial}">
                                            <label for="trialAll" >
                                                <span>Показать все</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="filter-column__row filter-column__row_bordered">
                                <div class="menu-input menu-input_xxsmall menu-input_w100">
                                    <div class="menu-input__title">Расслыка</div>
                                    <div class="menu-input__wrapper menu-input__wrapper_row">
                                        <div class="input-element__radio input-element__radio_list">
                                            <input type="radio" id="mailingYes" class="radio" name="maillig" value="FALSETRUE" th:field="*{mailing}">
                                            <label for="mailingYes" >
                                                <span>Да</span>
                                            </label>
                                        </div>
                                        <div class="input-element__radio input-element__radio_list">
                                            <input type="radio" id="mailingNo" class="radio" name="maillig" value="FALSEFALSE" th:field="*{mailing}">
                                            <label for="mailingNo" >
                                                <span>Нет</span>
                                            </label>
                                        </div>
                                        <div class="input-element__radio input-element__radio_list">
                                            <input type="radio" id="mailingAll" class="radio" name="maillig" value="all" th:field="*{mailing}">
                                            <label for="mailingAll" >
                                                <span>Показать все</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="filter-column__row">
                                <div class="menu-input menu-input_xxsmall menu-input_w100">
                                    <div class="menu-search__title">ID рекламной кампании / Смайлик + база</div>
                                    <div class="menu-search__wrapper">
                                        <input class="menu-search__input menu-search__input_small" placeholder=" Введите ID рекламной кампании / смайлик + база" th:field="*{tag}">
                                    </div>
                                </div>
                            </div>
                            <div class="filter-column__row">
                                <div class="menu-input menu-input_xxsmall menu-input_w100">
                                    <div class="menu-search__title">Комментарий</div>
                                    <div class="menu-search__wrapper">
                                        <input class="menu-search__input menu-search__input_small" placeholder="Введите комментарий" th:field="*{comment}">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="filter-column">
                            <div class="filter-column__title">Статусы сделок</div>
                            <div class="filter-column__row">
                                <div class="input-element__checkbox-wrapper">
                                    <div class="input-element__checkbox" th:each="status : ${dealStatuses}">
                                        <input type="checkbox" th:id="st + ${status.id}" th:field="*{statuses}" class="checkbox" th:value="${status.id}">
                                        <label class="checkbox-label checkbox-label_gray checkbox-label_told" th:for="st + ${status.id}" th:utext="${status.title}"></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="filter-column filter-column_row">
                            <div class="filter-column">
                                <div class="filter-column__title filter-column__title_m">Даты и цены</div>
                                <div class="filter-column__title filter-column__title_l">Даты</div>
                                <div class="filter-column__row">
                                    <div class="menu-input menu-input_reverse">
                                        <div class="menu-input__title">Дата старта (от и до)</div>
                                        <div class="menu-input__wrapper menu-input__wrapper_cal">
                                            <input class="datepicker-here-f menu-input__input menu-input__input_small menu-input__input_white" placeholder="Выберите дату от" th:field="*{startDateFrom}">
                                        </div>
                                    </div>
                                    <div class="menu-input menu-input_xxxsmall">
                                        <div class="menu-input__title"></div>
                                        <div class="menu-input__wrapper menu-input__wrapper_cal">
                                            <input class="datepicker-here-f menu-input__input menu-input__input_small menu-input__input_white" placeholder="Выберите дату до" th:field="*{startDateTo}">
                                        </div>
                                    </div>
                                </div>
                                <div class="filter-column__row">
                                    <div class="menu-input menu-input_reverse">
                                        <div class="menu-input__title">Дата создания (от и до)</div>
                                        <div class="menu-input__wrapper menu-input__wrapper_cal">
                                            <input class="datepicker-here-f menu-input__input menu-input__input_small menu-input__input_white" placeholder="Выберите дату от" th:field="*{createDateFrom}">
                                        </div>
                                    </div>
                                    <div class="menu-input menu-input_xxxsmall">
                                        <div class="menu-input__title"></div>
                                        <div class="menu-input__wrapper menu-input__wrapper_cal">
                                            <input class="datepicker-here-f menu-input__input menu-input__input_small menu-input__input_white" placeholder="Выберите дату до" th:field="*{createDateTo}">
                                        </div>
                                    </div>
                                </div>
                                <div class="filter-column__row">
                                    <div class="menu-input menu-input_reverse">
                                        <div class="menu-input__title">Дата обращения (от и до)</div>
                                        <div class="menu-input__wrapper menu-input__wrapper_cal">
                                            <input class="datepicker-here-f menu-input__input menu-input__input_small menu-input__input_white" placeholder="Выберите дату от" th:field="*{dealDateFrom}">
                                        </div>
                                    </div>
                                    <div class="menu-input menu-input_xxxsmall">
                                        <div class="menu-input__title"></div>
                                        <div class="menu-input__wrapper menu-input__wrapper_cal">
                                            <input class="datepicker-here-f menu-input__input menu-input__input_small menu-input__input_white" placeholder="Выберите дату до" th:field="*{dealDateTo}">
                                        </div>
                                    </div>
                                </div>
                                <div class="filter-column__row">
                                    <div class="menu-input menu-input_reverse">
                                        <div class="menu-input__title">Дата оплаты (от и до)</div>
                                        <div class="menu-input__wrapper menu-input__wrapper_cal">
                                            <input class="datepicker-here-f menu-input__input menu-input__input_small menu-input__input_white" placeholder="Выберите дату от" th:field="*{payDateFrom}">
                                        </div>
                                    </div>
                                    <div class="menu-input menu-input_xxxsmall">
                                        <div class="menu-input__title"></div>
                                        <div class="menu-input__wrapper menu-input__wrapper_cal">
                                            <input class="datepicker-here-f menu-input__input menu-input__input_small menu-input__input_white" placeholder="Выберите дату до" th:field="*{payDateTo}">
                                        </div>
                                    </div>
                                </div>

                                <div class="filter-column__row">
                                    <div class="input-element__checkbox-wrapper input-element__checkbox-wrapper_sm">
                                        <div class="input-element__checkbox">
                                            <input  type="checkbox" th:id="fps" class="checkbox" th:field="*{other}" th:value="firstPaymentSearch">
                                            <label class="checkbox-label checkbox-label_gray checkbox-label_told" th:for="fps">Первая оплата</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="filter-column__row">
                                    <div class="menu-input menu-input_reverse">
                                        <div class="menu-input__title">Дата напоминания (от и до)</div>
                                        <div class="menu-input__wrapper menu-input__wrapper_cal">
                                            <input class="datepicker-here-f menu-input__input menu-input__input_small menu-input__input_white" placeholder="Выберите дату от" th:field="*{reminderDateFrom}">
                                        </div>
                                    </div>
                                    <div class="menu-input menu-input_xxxsmall">
                                        <div class="menu-input__title"></div>
                                        <div class="menu-input__wrapper menu-input__wrapper_cal">
                                            <input class="datepicker-here-f menu-input__input menu-input__input_small menu-input__input_white" placeholder="Выберите дату до" th:field="*{reminderDateTo}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="filter-column">
                                <div class="filter-column__title filter-column__title_l">Цена и получено</div>
                                <div class="filter-column__row">
                                    <div class="menu-input menu-input_reverse">
                                        <div class="menu-input__title">Цена (от и до)</div>
                                        <div class="menu-input__wrapper menu-input__wrapper_sum">
                                            <input class="menu-input__input menu-input__input_small menu-input__input_white" placeholder="Укажите сумму" th:field="*{priceFrom}">
                                        </div>
                                    </div>
                                    <div class="menu-input menu-input_xxxsmall">
                                        <div class="menu-input__title"></div>
                                        <div class="menu-input__wrapper menu-input__wrapper_sum">
                                            <input class="menu-input__input menu-input__input_small menu-input__input_white" placeholder="Укажите сумму"th:field="*{priceTo}" >
                                        </div>
                                    </div>
                                </div>
                                <div class="filter-column__row">
                                    <div class="menu-input menu-input_reverse">
                                        <div class="menu-input__title">Получено (от и до)</div>
                                        <div class="menu-input__wrapper menu-input__wrapper_sum">
                                            <input class="menu-input__input menu-input__input_small menu-input__input_white" placeholder="Укажите сумму" th:field="*{paidFrom}">
                                        </div>
                                    </div>
                                    <div class="menu-input menu-input_xxxsmall">
                                        <div class="menu-input__title"></div>
                                        <div class="menu-input__wrapper menu-input__wrapper_sum">
                                            <input class="menu-input__input menu-input__input_small menu-input__input_white" placeholder="Укажите сумму" th:field="*{paidTo}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="filter-column">
                            <div class="filter-column__title">Пустые поля</div>
                            <div class="filter-column__row">
                                <div class="input-element__checkbox-wrapper">
                                    <div class="input-element__checkbox">
                                        <input  type="checkbox" th:id="e1" class="checkbox" th:field="*{empties}" th:value="link">
                                        <label class="checkbox-label checkbox-label_gray checkbox-label_told" th:for="e1">Ссылка</label>
                                    </div>
                                    <div class="input-element__checkbox">
                                        <input  type="checkbox" th:id="e2" class="checkbox" th:field="*{empties}" th:value="phone">
                                        <label class="checkbox-label checkbox-label_gray checkbox-label_told" th:for="e2">Номер телефона</label>
                                    </div>
                                    <div class="input-element__checkbox">
                                        <input  type="checkbox" th:id="e3" class="checkbox" th:field="*{empties}" th:value="comment">
                                        <label class="checkbox-label checkbox-label_gray checkbox-label_told" th:for="e3">SMS / Чек</label>
                                    </div>
                                    <div class="input-element__checkbox">
                                        <input  type="checkbox" th:id="e4" class="checkbox" th:field="*{empties}" th:value="accountNumber">
                                        <label class="checkbox-label checkbox-label_gray checkbox-label_told" th:for="e4">№ счёта</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="filter-content__footer">
                <div tr-filter-form-btn class="button">Применить фильтры</div>
                <div th:if="${filter.isCanClearWithManager()}" class="clear-filter clear-filter_bordered">
                    <form tr-clear-form action="#" th:action="@{/performance-assessment/rating/clearFilter}" th:method="post" class="clear-filter__form">
                        <button tr-clear-form-btn class="button button_clear">Сбросить фильтры</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div js-menu-open-comment class="menu">
    <div class="menu__wrapper">
        <div js-menu-open-comment-close-btn class="menu-header__close-btn menu-header__close-btn_absolute"></div>
        <div class="menu__content menu__content_end">
            <div class="menu__content-side menu__content-side_large">
                <div class="menu__header-wrapper">
                    <div class="menu-header">
                        <div class="menu-header__title">
                            Подробнее об оценке
                        </div>
                    </div>
                </div>
                <div class="menu__list menu__list_p0 custom-scroll">
                    <input c-rate-id type="hidden" name="id" required>
                    <input c-rate-id-item type="hidden" name="idItem" required>

                    <div class="menu-input menu-input_xsmall menu-input_t30">
                        <div class="menu-input__wrapper menu-input__wrapper_row ">
                            <div class="desc-block__wrapper desc-block__wrapper_end ">
                                <div c-rate-item-name class="desc-block__desc"></div>
                            </div>

                            <div class="desc-block__wrapper desc-block__wrapper_right desc-block__wrapper_end desc-block__wrapper_mr10">
                                <div class="desc-block__desc">Оценка</div>
                            </div>
                            <div class="desc-block__wrapper desc-block__wrapper_end">
                                <div c-rate-score class="score"></div>
                            </div>
                        </div>
                    </div>

                    <div class="menu-input__delim" comments>
                        <span></span>
                    </div>
                </div>
                <div class="menu__footer">
                    <button type="button" js-menu-open-comment-close-btn class="button_right button button_white">Закрыть</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="base :: menu-view-client"></div>

<div th:replace="base :: menu-view-deal"></div>

<th:block th:insert="base :: scripts" />
<script th:src="@{/js/performance-assessment-rate.js}"></script>
<script th:src="@{/js/transition-loader.js}"></script>
<script th:src="@{/js/upload-files.js}"></script>
<script th:src="@{/js/transactions-filter.js}"></script>
<script th:src="@{/js/view-deals.js}"></script>
<script th:src="@{/js/deals-client-card.js}"></script>
<script th:src="@{/js/jquery.fancybox.min.js}"></script>
<script th:src="@{/js/update-deal-card-rate.js}"></script>

<script th:inline="javascript">
    /*<![CDATA[*/
    setFilter(/*[[${filter}]]*/);
    /*]]>*/
</script>

</body>
</html>